"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createNodes = void 0;
const path_1 = require("path");
const constants_1 = require("../constants");
exports.createNodes = [
    `**/${constants_1.GO_MOD_FILE}`,
    (file) => {
        const root = (0, path_1.dirname)(file);
        const parts = root.split(/[/\\]/g);
        const name = parts[parts.length - 1].toLowerCase();
        // We cannot create nodes if go.mod is in the workspace root folder
        // in this case we let Nx use project.json files (by default)
        if (root === '.') {
            return {};
        }
        return {
            projects: {
                [name]: {
                    name,
                    root,
                    // TODO provide default targets for non-project.json workspaces
                    targets: {},
                },
            },
        };
    },
];
//# sourceMappingURL=create-nodes.js.map